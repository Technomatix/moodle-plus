!function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){e.exports=vendor},function(e,t,n){e.exports=n(0)(50)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.currentDate=function(){var e=new Date;return e.setHours(0,0,0,0),e},t.dateFromString=function(e){var t=e.split("-").map(function(e){return parseInt(e)});return new Date(Date.UTC(t[0],t[1]-1,t[2]))});t.isValidDate=function(e){return null!==e&&e.length==="YYYY-MM-DD".length&&r(e).toISOString().substr(0,"YYYY-MM-DD".length)===e},t.getLangString=function(e){return M.util.get_string("js:"+e,"local_todolist")}},function(e,t,n){e.exports=n(0)(30)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setInitialState=function(e){return{type:"SET_INITIAL_STATE",items:e}},t.receiveItem=function(e){return{type:"RECEIVE_ITEM",item:e}},t.toggleDone=function(e){return{type:"TOGGLE_DONE",item:e}},t.setFormDueDate=function(e){return{type:"SET_FORM_DUE_DATE",dueDate:e}},t.setFormTaskDescription=function(e){return{type:"SET_FORM_TASK_DESCRIPTION",taskDescription:e}},t.optimisticallyAddItem=function(e,t){return{type:"OPTIMISTICALLY_ADD_ITEM",dueDate:e,taskDescription:t}},t.removeOptimisticallyAddedItems=function(){return{type:"REMOVE_OPTIMISTICALLY_ADDED_ITEMS"}},t.deleteItem=function(e){return{type:"DELETE_ITEM",item:e}}},function(e,t,n){e.exports=n(0)(194)},function(e,t,n){e.exports=n(0)(88)},function(e,t,n){e.exports=n(0)(93)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AppContainer=void 0;var i=n(1),a=u(i),o=n(3),s=u(o),l=n(5),d=n(6),c=n(16),f=u(c),m=n(15),p=u(m),D=n(4),g=r(D),T=n(17),_=r(T),I=function(e){var t=e.items,n=e.form,r=e.toggleDoneThunk,u=e.setFormDueDate,i=e.setFormTaskDescription,o=e.addItemThunk,s=e.deleteItemThunk;return a.default.createElement("div",null,a.default.createElement(f.default,{items:t,toggleDoneThunk:r,deleteItemThunk:s}),a.default.createElement(p.default,{form:n,setFormDueDate:u,setFormTaskDescription:i,addItemThunk:o}))};I.propTypes={items:s.default.arrayOf(s.default.object),form:s.default.object,toggleDoneThunk:s.default.func,setFormDueDate:s.default.func,setFormTaskDescription:s.default.func,addItemThunk:s.default.func,deleteItemThunk:s.default.func};var k=function(e){return{items:e.items,form:e.form}},v=function(e){return(0,d.bindActionCreators)({toggleDoneThunk:_.toggleDoneThunk,setFormDueDate:g.setFormDueDate,setFormTaskDescription:g.setFormTaskDescription,addItemThunk:_.addItemThunk,deleteItemThunk:_.deleteItemThunk},e)};t.AppContainer=(0,l.connect)(k,v)(I)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),u=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(2),a=function(e,t){var n={};return n.items=t.map(function(e){return{id:parseInt(e.id),taskDescription:e.task_description,isDone:"1"===e.is_done,dueDate:new Date(1e3*parseInt(e.due_timestamp))}}),n.form={id:-1,taskDescription:"",isDone:!1,dueDate:""},n},o=function(e,t){var n=(0,u.default)(e),r=n.items.find(function(e){return e.id===parseInt(t.id)});return void 0===r&&(r=n.items[n.items.length-1],r.id=parseInt(t.id)),r.taskDescription=t.task_description,r.isDone="1"===t.is_done,r.dueDate=new Date(1e3*parseInt(t.due_timestamp)),n},s=function(e,t){var n=(0,u.default)(e),r=n.items.find(function(e){return e.id===t.id});return void 0!==r&&(r.isDone=!r.isDone),n},l=function(e,t){var n=(0,u.default)(e);return n.form.dueDate=t,n},d=function(e,t){var n=(0,u.default)(e);return n.form.taskDescription=t,n},c=function(e){var t=(0,u.default)(e),n=(0,i.dateFromString)(t.form.dueDate);return t.items.push({id:t.form.id,taskDescription:t.form.taskDescription,isDone:!1,dueDate:n}),t.form={id:t.form.id-1,taskDescription:"",isDone:!1,dueDate:""},t},f=function(e){var t=(0,u.default)(e);return t.items=t.items.filter(function(e){return e.id>0}),t},m=function(e,t){var n=(0,u.default)(e);return n.items=n.items.filter(function(e){return e.id!==t.id}),n};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_INITIAL_STATE":return a(0,t.items);case"RECEIVE_ITEM":return o(e,t.item);case"TOGGLE_DONE":return s(e,t.item);case"SET_FORM_DUE_DATE":return l(e,t.dueDate);case"SET_FORM_TASK_DESCRIPTION":return d(e,t.taskDescription);case"OPTIMISTICALLY_ADD_ITEM":return c(e);case"REMOVE_OPTIMISTICALLY_ADDED_ITEMS":return f(e);case"DELETE_ITEM":return m(e,t.item)}return e}},function(e,t,n){e.exports=n(0)(123)},function(e,t,n){e.exports=n(0)(210)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteItem=t.postItem=t.putItem=void 0;var r=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(2);t.putItem=function(e,t){u.default.put("item/").type("application/json").accept("application/json").send({id:e.id,task_description:e.taskDescription,is_done:e.isDone?1:0,due_timestamp:parseInt(e.dueDate.getTime()/1e3)}).end(t)},t.postItem=function(e,t,n){u.default.post("item/").type("application/json").accept("application/json").send({task_description:t,due_timestamp:parseInt((0,i.dateFromString)(e).getTime()/1e3)}).end(n)},t.deleteItem=function(e){u.default.delete("item/").type("application/json").accept("application/json").send({id:e.id}).end()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var u=n(1),i=r(u),a=n(10),o=r(a),s=n(6),l=n(5),d=n(11),c=r(d),f=n(9),m=r(f),p=n(4),D=n(8),g=(0,s.applyMiddleware)(c.default)(s.createStore),T=g(m.default);T.dispatch((0,p.setInitialState)(JSON.parse(document.querySelector(".todolist-items").innerHTML)));var _=function(){o.default.render(i.default.createElement(l.Provider,{store:T},i.default.createElement(D.AppContainer,null)),document.querySelector('div[role="main"]'))},I=function e(){"undefined"!=typeof M&&void 0!==M.util&&"function"==typeof M.util.get_string?_():setTimeout(e,100)};setTimeout(I,100)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=r(u),a=n(3),o=r(a),s=n(2),l=function(e){var t=e.item,n=e.toggleDoneThunk,r=e.deleteItemThunk,u=t.dueDate<(0,s.currentDate)()?"danger":"warning",a="list-group-item list-group-item-"+(t.isDone?"success":u),o=t.isDone?(0,s.getLangString)("done"):(0,s.getLangString)("due")+" "+t.dueDate.toUTCString().substr(0,"Sun, 01 Jan 2017".length),l={position:"absolute",right:"20px"};return i.default.createElement("li",{key:t.id,className:a},i.default.createElement("label",{className:"form-check-label"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",name:"mark",checked:t.isDone,onChange:function(){return n(t)},disabled:t.id<0}),i.default.createElement("span",null," ",o,": ",t.taskDescription)),i.default.createElement("button",{className:"btn btn-danger btn-sm",style:l,onClick:function(){return r(t)},disabled:!t.isDone},(0,s.getLangString)("delete")))};l.propTypes={item:o.default.object,toggleDoneThunk:o.default.func,deleteItemThunk:o.default.func},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=r(u),a=n(3),o=r(a),s=n(2),l=function(e){var t=e.form,n=e.setFormDueDate,r=e.setFormTaskDescription,u=e.addItemThunk;return i.default.createElement("div",{className:"card card-block"},i.default.createElement("h4",{className:"card-title"},(0,s.getLangString)("add_item")),i.default.createElement("form",null,i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"due"},(0,s.getLangString)("due")),i.default.createElement("input",{type:"text",className:"form-control",id:"due",placeholder:"YYYY-MM-DD",value:t.dueDate,maxLength:"YYYY-MM-DD".length,onChange:function(e){return n(e.target.value)}})),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"description"},(0,s.getLangString)("description")),i.default.createElement("input",{type:"text",className:"form-control",id:"description",placeholder:(0,s.getLangString)("type_task_desc_here"),value:t.taskDescription,onChange:function(e){return r(e.target.value)}})),i.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return u()},disabled:!(0,s.isValidDate)(t.dueDate)||0===t.taskDescription.length},(0,s.getLangString)("save"))))};l.propTypes={form:o.default.object,setFormDueDate:o.default.func,setFormTaskDescription:o.default.func,addItemThunk:o.default.func},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=r(u),a=n(3),o=r(a),s=n(14),l=r(s),d=n(2),c=function(e){var t=e.items,n=e.toggleDoneThunk,r=e.deleteItemThunk;return i.default.createElement("div",{className:"card"},i.default.createElement("div",{className:"card-block"},i.default.createElement("h4",{className:"card-title"},(0,d.getLangString)("items")),i.default.createElement("ul",{className:"list-group"},t.map(function(e){return i.default.createElement(l.default,{key:e.id,item:e,toggleDoneThunk:n,deleteItemThunk:r})}))))};c.propTypes={items:o.default.array,toggleDoneThunk:o.default.func,deleteItemThunk:o.default.func},t.default=c},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteItemThunk=t.addItemThunk=t.toggleDoneThunk=void 0;var u=n(7),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=n(12),o=r(a),s=n(4),l=r(s);t.toggleDoneThunk=function(e){return function(t){t(l.toggleDone(e));var n=(0,i.default)(e);n.isDone=!n.isDone,o.putItem(n,function(n,r){t(n?l.toggleDone(e):l.receiveItem(r.body))})}},t.addItemThunk=function(){return function(e,t){var n=t().form.dueDate,r=t().form.taskDescription;e(l.optimisticallyAddItem(n,r)),o.postItem(n,r,function(t,n){t||e(l.receiveItem(n.body)),e(l.removeOptimisticallyAddedItems())})}},t.deleteItemThunk=function(e){return function(t){t(l.deleteItem(e)),o.deleteItem(e)}}},function(e,t,n){e.exports=n(0)(214)}]);
//# sourceMappingURL=todolist.min.js.map